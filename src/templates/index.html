{% extends "base.html" %}

{% block body_id %}live{% end %}

{% block content %}

<div id="links">
    <a href="/animate/" class="button"><span>&#9664;</span> Animate</a>
    <a href="/text/" class="button">Text <span>&#9654;</span></a>
</div>

<div id="color" class="color-selection">
    <!-- 
     <div style="background:rgb(255, 255, 0);"></div>
    <div style="background:rgb(255, 255, 255);"></div>
    <div style="background:rgb(0, 255, 255);"></div>
    -->
    <div class="active" style="background:rgb(255, 0, 0);"></div>
    <div style="background:rgb(255, 255, 0);"></div>
    <div style="background:rgb(0, 255, 255);"></div>
    <div style="background:rgb(255, 0, 255);"></div>
    <div style="background:rgb(255, 255, 255);"></div>
    <div style="background:rgb(0, 255, 0);"></div>
    <div style="background:rgb(0, 0, 255);"></div>
    <div style="background:rgb(0, 0, 0);"></div>
</div>

<table id="panel">
    <thead></thead>
    <tfoot></tfoot>
    <tbody>
        {% for y in xrange(0, 8) %}
        <tr>
            {% for x in xrange(0, 8) %}
            <td data-x="{{x}}" data-y="{{y}}"></td>
            {% end %}
        </tr>
        {% end %}
    </tbody>
</table>

<div id="saved-animations">
    <h2> Saved animations </h2>
    {% for a in saved_animations %}
        <div animation-title="{{a[0]}}">
            <span>{{ a[0] }} by <i>{{ a[1] }}</i></span>
            <table>
                <thead></thead>
                <tfoot></tfoot>
                <tbody>
                    {% for y in xrange(0, 192, 24) %}
                    <tr>
                        {% for x in xrange(0, 24, 3) %}
                        <td style="background-color: rgb({{a[2][0][x + y]}}, {{a[2][0][x + y + 1]}}, {{a[2][0][x + y + 2]}})"></td>
                        {% end %}
                    </tr>
                    {% end %}
                </tbody>
            </table>
        </div>
    {% end %}
</div>
{% end %}


{% block scripts %}
<script type="text/javascript">
    $(function() {
        
        // input
        panelInteraction.init();
        // output
        // panelUpdater.init();
        socketIOPanelUpdater.init();

        $('#saved-animations div').click(function(e) {
            e.preventDefault(); 
            var t = $(this).attr('animation-title');
            panelInteraction.playAnimation(t);
        });
    });
</script>
{% end %}